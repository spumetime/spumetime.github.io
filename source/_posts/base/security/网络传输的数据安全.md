---
title: 网络传输的数据安全
categories:
  - 猿基础
tags:
  - 加密
  - 信息安全
date: 2018-09-01 00:09:24
---

# 数据加密的两种方式？
你有没有想过，在网络上传输数据是如何防止以下两种场景的？

- 数据泄漏，也就是数据窃听。http传输的就是明文，虽然快但是稍微懂点网络技术的人都可以很容易窃取你的数据。
- 数据篡改。如果为了防止数据泄漏，对数据加密了。黑客依旧可以篡改你的数据，他得不到，也不让你和服务器得到。

答案肯定是对数据进行加密，传统的加密方式有这两种：

- 对称加密：加密的码和解密的码一样。
- 非对称加密：加密的码和解密的码不一样，加密码称为公钥，解密码称为私钥。这样信息发送按照公钥加密，只有信息接收方有私钥解密，其他没有私钥的人都无法破解。

# 能否用对称加密？

使用对称加密，有一个前置要求：密钥双方都要知道，也就是要协商好。在互联网场景下，用户的客户端和服务器无法一对一协商，只能在用户需要访问的时候，由服务器传给客户端（或者客户端传给服务器）。密钥在互联网的传输过程中，如果被人拦截，那么密钥泄漏，也就失去了加密的意义，这就是叫**中间人攻击**。如果单纯用对称加密的话，这个问题答案是不能保证数据安全。

既然中间人攻击的原因就是密钥直接在网络中传输导致的泄漏，有没有可能不传输密钥？有一个办法，就是所有客户端/浏览器都内置所有网站的密钥，且加密，这显然是不现实的。

基于上面说的原因，在互联网上只对称加密是有安全风险的。

![img](https://spumetime-blog.oss-cn-shenzhen.aliyuncs.com/img/fb23680207c10ea61d7a1d6f361d0633-20250618130910973.svg)

# 能否用非对称加密？

## 一对公私钥

如下图，使用非对称加密，黑客知道公钥依然无法解密客户端发送的信息。但这个依旧有个问题，就是无法防止数据被篡改。

![img](https://spumetime-blog.oss-cn-shenzhen.aliyuncs.com/img/413efe52b69edf09d53d665f2ce2a2bb-20250618130910987.svg)

## 两对公私钥

下图是简单的双向数据加密，都采用对方公钥加密。如果在交换公钥过程中，被中间人窃取，给client和server都发送成中间人的公钥，那么后续中间人就能解密两端的所有信息。两对公私钥的场景和一对公私钥的场景一样，都要防止公钥的被篡改？（一般都不用交换彼此公钥的做法，因为要防止两次公钥被篡改，流程更加复杂性能更差）。

![img](https://spumetime-blog.oss-cn-shenzhen.aliyuncs.com/img/21305cfc040c07923b6a7133d2a1fcd7-20250618130910998.svg)

# 如何防止公钥被篡改？

其实就是保障数据完整性，有很多方法：

- **数据指纹**：对数据进行hash（如 SHA-256、MD5），把生成后的hash值和原数据一起给到对方。对方收到这两者之后，再对原数据进行hash。如果再次hash值能够和原来hash值对上，说明数据没有被篡改，否则相反。但这样有一个前提，数据指纹要和原数据分开存储，否则对原数据和指纹一起修改，就无法发现数据被篡改了。
- **数据签名**：数据发送方对数据指纹用发送方秘钥加密，数据接受方用数据发送方的公钥对数据解密之后，再与数据重新hash值对比。一致则表明没有篡改，否则相反。
- **数据证书：**


---
title: 许式伟的架构课
categories:
  - 猿阅读
tags:
  - 架构
date: 2024-03-30 01:56:00
---

架构分为业务架构和基础架构。

架构的本质是业务的正交分解。



架构分解中有两大难题：其一，**需求的交织**。不同需求混杂在一起，也就是存在所谓的全局性功能。其二，**需求的易变**。不同客户，不同场景下需求看起来很不一样，场景呈发散趋势。



**怎么做业务分解**？

业务分解就是最小化的核心系统，加上多个正交分解的周边系统。核心系统一定要最小化，要稳定。坚持不要往核心系统中增加新功能，这样你的业务架构就不可能有臭味。所以业务做正交分解的第一件事情，就是要分出哪些是核心系统，哪些是周边子系统。核心系统构成了业务的最小功能集，而后通过不断增加新的周边功能，而演变成功能强大的复杂系统。这里有一个周边功能对核心系统总伤害的经验公式：对每一处修改∑log2(修改行数+1)同一个周边功能相邻的代码行算作一处修改。不同周边功能的修改哪怕相邻也算作多处。这个公式核心想表达的含义是：修改处数越多，伤害越大。对于每一处修改，鼓励尽可能减少到只修改一行，更多代码放到周边模块自己那里去。



怎么判断是一个好的架构？

架构设计会有它的一些基本准则。比如：

KISS：简单比复杂好；

Modularity：着眼于模块而不是框架；

Testable：保证可测试性；

Orthogonal Decomposition：正交分解。



边界，重新审视边界

负责子域同学心智负担

边界一刀如何界定？

功能划分实现的依据



架构老化源于什么？

在我们不断给系统添加各种新功能的时候，往往会遇到功能需求的实现方式不在当初框架设定的范围之内，于是很多功能代码逸出框架的范围之外。

这些散落在各处的代码，把系统绞得支离破碎。久而久之，代码就出现老化，散发出臭味。

代码老化的标志，是添加功能越来越难，迭代效率降低，问题却是持续不断，解决了一个问题却又由此生出好几个新问题。



**重构要润物细无声**
